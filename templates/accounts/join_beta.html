{% extends "base.html" %}
{% load static %}

{% block title %}Join Beta â€“ FoundrFuse{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/accounts.css' %}">
<link rel="stylesheet" href="{% static 'css/join_beta.css' %}">
{% endblock %}

{% block content %}
<div class="accounts-bg">
  <form class="accounts-card fade-in" method="post" enctype="multipart/form-data" autocomplete="off">
    {% csrf_token %}
    <h1>Join the Beta. Match Early.</h1>
    <p>Weâ€™re bringing investors and founders closer, smarter, faster.</p>
    <div class="secure-badge">
      <img src="{% static 'icons/lock.svg' %}" alt="Secure" width="18" height="18">
      Secure &amp; private
    </div>
    <div class="form-group">
      <label class="form-label" for="full_name">Full Name *</label>
      <input class="form-control" type="text" id="full_name" name="full_name" required>
    </div>
    <div class="form-group">
      <label class="form-label" for="email">Email Address *</label>
      <input class="form-control" type="email" id="email" name="email" required>
    </div>
    <div class="form-group">
      <label class="form-label" for="role">Role *</label>
      <select class="form-select" id="role" name="role" required>
        <option value="">Select...</option>
        <option value="founder">Founder</option>
        <option value="investor">Investor</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label" for="linkedin">LinkedIn Profile *</label>
      <input class="form-control" type="url" id="linkedin" name="linkedin" placeholder="https://linkedin.com/in/yourprofile" required>
    </div>
    <div class="form-group" id="pitch-deck-group" style="display:none;">
      <label class="form-label" for="pitch_deck">Upload Pitch Deck (PDF)</label>
      <div class="upload-box" id="upload-box">
        <span id="upload-text">Drag &amp; drop or click to upload</span>
        <input type="file" id="pitch_deck" name="pitch_deck" accept="application/pdf" style="display:none;">
      </div>
    </div>
    <div class="form-group">
      <label class="form-label" for="id_doc">Verify with ID (Optional)</label>
      <div class="upload-box" id="id-upload-box">
        <span id="id-upload-text">Upload ID (Govt ID, CIN, etc.)</span>
        <input type="file" id="id_doc" name="id_doc" accept="application/pdf,image/*" style="display:none;">
      </div>
    </div>
    <div class="checkbox-group">
      <input type="checkbox" id="agree" name="agree" required>
      <label for="agree" style="font-size:0.97rem;">I agree to the <a href="{% url '#' %}" target="_blank">Terms</a> and <a href="{% url 'privacy' %}" target="_blank">Privacy Policy</a></label>
    </div>
    <button type="submit" class="cta-btn">Request Early Access</button>
    <div class="waitlist-banner">
      ðŸš€ Weâ€™re onboarding in curated batches. Youâ€™ll hear from us shortly as we match Founders &amp; Investors in waves.
    </div>
    <a href="{% url 'login' %}" class="login-link">Already matched? <b>Login to FoundrFuse</b></a>
    <div style="text-align:center; margin-top:1.2rem; font-size:0.92rem; color:#888;">
      <span>Powered by FoundrFuse Beta Â· v1.0</span>
    </div>
  </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Show pitch deck upload only for founders
  document.getElementById('role').addEventListener('change', function() {
    document.getElementById('pitch-deck-group').style.display = this.value === 'founder' ? 'block' : 'none';
  });

  // Drag & drop for pitch deck
  const uploadBox = document.getElementById('upload-box');
  const pitchInput = document.getElementById('pitch_deck');
  uploadBox.addEventListener('click', () => pitchInput.click());
  pitchInput.addEventListener('change', () => {
    document.getElementById('upload-text').textContent = pitchInput.files.length ? pitchInput.files[0].name : 'Drag & drop or click to upload';
    uploadBox.style.borderColor = '#00B8F4';
  });

  // Drag & drop for ID doc
  const idUploadBox = document.getElementById('id-upload-box');
  const idInput = document.getElementById('id_doc');
  idUploadBox.addEventListener('click', () => idInput.click());
  idInput.addEventListener('change', () => {
    document.getElementById('id-upload-text').textContent = idInput.files.length ? idInput.files[0].name : 'Upload ID (Govt ID, CIN, etc.)';
    idUploadBox.style.borderColor = '#00B8F4';
  });

  // Soft confetti on submit (demo only)
  document.querySelector('.accounts-card form')?.addEventListener('submit', function(e) {
    setTimeout(() => {
      // Add your confetti animation here or use a library like Canvas Confetti
      alert('Thank you! Weâ€™re reviewing your profile. Check your inbox soon.');
    }, 300);
  });
</script>
{% endblock %}